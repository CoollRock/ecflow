+ perf stat -r 10 bin/ecflow_client --port 3160 --load /var/tmp/ma0/BIG_DEFS/vsms2.31415.def check_only

 Performance counter stats for 'bin/ecflow_client --port 3160 --load /var/tmp/ma0/BIG_DEFS/vsms2.31415.def check_only' (10 runs):

       1495.750092      task-clock (msec)         #    0.999 CPUs utilized            ( +-  2.73% )
                 5      context-switches          #    0.003 K/sec                    ( +-  8.92% )
                 0      cpu-migrations            #    0.000 K/sec                    ( +-100.00% )
           131,043      page-faults               #    0.088 M/sec                    ( +-  0.00% )
     5,751,352,937      cycles                    #    3.845 GHz                      ( +-  2.70% )
   <not supported>      stalled-cycles-frontend  
   <not supported>      stalled-cycles-backend   
    10,240,951,715      instructions              #    1.78  insns per cycle          ( +-  0.00% )
     2,898,462,442      branches                  # 1937.799 M/sec                    ( +-  0.01% )
        15,219,900      branch-misses             #    0.53% of all branches          ( +-  1.29% )

       1.496598070 seconds time elapsed                                          ( +-  2.73% )



+ bin/ecflow_client --port 3160 --load /var/tmp/ma0/BIG_DEFS/vsms2.31415.def
+ echo run strace
run strace
+ strace -c bin/ecflow_client --port 3160 --sync_full 0
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 37.16    0.017371           4      4041           brk
 31.26    0.014612         769        19           munmap
 28.05    0.013112          12      1084         1 recvmsg
  3.03    0.001416           1      1083           epoll_wait
  0.12    0.000057          10         6         2 connect
  0.12    0.000055           2        31           close
  0.11    0.000051           3        15           mremap
  0.06    0.000027           1        54           mmap
  0.04    0.000018           9         2           getsockopt
  0.02    0.000009           9         1           sendmsg
  0.01    0.000007           2         4           timerfd_settime
  0.01    0.000005           1         6           epoll_ctl
  0.01    0.000004           1         5           poll
  0.01    0.000003           0         7           socket
  0.00    0.000001           0        33        14 open
  0.00    0.000001           1         2           ioctl
  0.00    0.000000           0        20           read
  0.00    0.000000           0         1           write
  0.00    0.000000           0         9         3 stat
  0.00    0.000000           0        16           fstat
  0.00    0.000000           0         1           lseek
  0.00    0.000000           0        22           mprotect
  0.00    0.000000           0         2           rt_sigaction
  0.00    0.000000           0         1           rt_sigprocmask
  0.00    0.000000           0         2         2 access
  0.00    0.000000           0         3           sendto
  0.00    0.000000           0         1           bind
  0.00    0.000000           0         3           getsockname
  0.00    0.000000           0         1           execve
  0.00    0.000000           0         1           uname
  0.00    0.000000           0         1           getrlimit
  0.00    0.000000           0         2           getuid
  0.00    0.000000           0         1           arch_prctl
  0.00    0.000000           0         4           futex
  0.00    0.000000           0         1           set_tid_address
  0.00    0.000000           0         1           set_robust_list
  0.00    0.000000           0         1           timerfd_create
  0.00    0.000000           0         1           eventfd2
  0.00    0.000000           0         1           epoll_create1
------ ----------- ----------- --------- --------- ----------------
100.00    0.046749                  6489        22 total

+ perf stat -r 10 bin/ecflow_client --port 3160 --sync_full 0

 Performance counter stats for 'bin/ecflow_client --port 3160 --sync_full 0' (10 runs):

       1753.430159      task-clock (msec)         #    0.765 CPUs utilized            ( +-  0.33% )
               646      context-switches          #    0.369 K/sec                    ( +-  9.50% )
                 0      cpu-migrations            #    0.000 K/sec                    ( +- 66.67% )
           266,671      page-faults               #    0.152 M/sec                    ( +-  0.00% )
     6,739,256,694      cycles                    #    3.843 GHz                      ( +-  0.32% )
   <not supported>      stalled-cycles-frontend  
   <not supported>      stalled-cycles-backend   
    12,175,310,062      instructions              #    1.81  insns per cycle          ( +-  0.00% )
     3,185,692,842      branches                  # 1816.835 M/sec                    ( +-  0.00% )
        11,879,527      branch-misses             #    0.37% of all branches          ( +-  0.41% )

       2.292843169 seconds time elapsed                                          ( +-  0.41% )
       


+ ANode/parser/perf_aparser_only /var/tmp/ma0/BIG_DEFS/3199.def
real    0m0.93s
user    0m0.83s
sys     0m0.08s

+ ANode/parser/perf_aparser_only /var/tmp/ma0/BIG_DEFS/vsms2.31415.def
real    0m1.47s
user    0m1.30s
sys     0m0.16s

+ ANode/parser/perf_aparser_timer /var/tmp/ma0/BIG_DEFS/3199.def
 Parsing Node tree & AST creation time parse(1) = 0.824s wall, (0.760s user + 0.050s system = 0.810s) CPU (98.4%)
 Parsing Node tree *only* time         parse(1) = 0.628s wall, (0.580s user + 0.060s system = 0.640s) CPU (102.0%)
 Save and restore as string(DEFS)               = 0.987s wall, (0.870s user + 0.120s system = 0.990s) CPU (100.3%) -> string size(33231624)
 Save and restore as string(NET)                = 0.688s wall, (0.650s user + 0.040s system = 0.690s) CPU (100.3%) -> string size(33232282) checks relaxed
 Save and restore as string(MIGRATE)            = 0.682s wall, (0.670s user + 0.010s system = 0.680s) CPU (99.6%) -> string size(33232286)
 Save as DEFS checkpoint, time taken            = 0.107s wall, (0.090s user + 0.020s system = 0.110s) CPU (102.9%)
 Save as CEREAL checkpoint, time taken          = 1.309s wall, (1.310s user + 0.000s system = 1.310s) CPU (100.1%)
 Checkpt(DEFS) and reload, time taken           = 0.707s wall, (0.680s user + 0.030s system = 0.710s) CPU (100.4%) file_size(33235526)  result(1) msg()
 Checkpt(CEREAL) and reload , time taken        = 2.715s wall, (2.610s user + 0.110s system = 2.720s) CPU (100.2%) file_size(99379310)  result(1) msg()
 Test all paths can be found. time taken        = 0.326s wall, (0.320s user + 0.000s system = 0.320s) CPU (98.2%)
 time for 10 jobSubmissions                     = 0.266s wall, (0.270s user + 0.000s system = 0.270s) CPU (101.5%) jobs:4
 Time for Defs::check(inlimit resolution)       = 0.056s wall, (0.050s user + 0.000s system = 0.050s) CPU (89.0%) result(1)
 time for deleting all nodes                    = 0.271s wall, (0.270s user + 0.000s system = 0.270s) CPU (99.5%)
 9.964471s wall, 9.500000s user + 0.450000s system = 9.950000s CPU (99.9%)

+ ANode/parser/perf_aparser_timer /var/tmp/ma0/BIG_DEFS/vsms2.31415.def
 Parsing Node tree & AST creation time parse(1) = 1.235s wall, (1.100s user + 0.120s system = 1.220s) CPU (98.8%)
 Parsing Node tree *only* time         parse(1) = 1.229s wall, (1.080s user + 0.160s system = 1.240s) CPU (100.9%)
 Save and restore as string(DEFS)               = 1.524s wall, (1.380s user + 0.150s system = 1.530s) CPU (100.4%) -> string size(57634217)
 Save and restore as string(NET)                = 1.074s wall, (1.050s user + 0.030s system = 1.080s) CPU (100.5%) -> string size(68295827) checks relaxed
 Save and restore as string(MIGRATE)            = 1.202s wall, (1.150s user + 0.050s system = 1.200s) CPU (99.9%) -> string size(68295831)
 Save as DEFS checkpoint, time taken            = 0.310s wall, (0.260s user + 0.050s system = 0.310s) CPU (100.1%)
 Save as CEREAL checkpoint, time taken          = 2.648s wall, (2.640s user + 0.000s system = 2.640s) CPU (99.7%)
 Checkpt(DEFS) and reload, time taken           = 1.513s wall, (1.420s user + 0.090s system = 1.510s) CPU (99.8%) file_size(118606320)  result(1) msg()
 Checkpt(CEREAL) and reload , time taken        = 5.323s wall, (5.070s user + 0.260s system = 5.330s) CPU (100.1%) file_size(216055639)  result(1) msg()
 Test all paths can be found. time taken        = 0.543s wall, (0.540s user + 0.000s system = 0.540s) CPU (99.4%)
 time for 10 jobSubmissions                     = 0.095s wall, (0.090s user + 0.000s system = 0.090s) CPU (94.5%) jobs:0
 Time for Defs::check(inlimit resolution)       = 0.535s wall, (0.540s user + 0.000s system = 0.540s) CPU (100.9%) result(0)
 time for deleting all nodes                    = 0.370s wall, (0.370s user + 0.000s system = 0.370s) CPU (99.9%)
 18.389873s wall, 17.420000s user + 0.960000s system = 18.380000s CPU (99.9%)

+ Client/perf_test_large_defs
Running 1 test case...
Client:: ...test_perf_for_large_defs:   port(3160)

/var/tmp/ma0/BIG_DEFS/vsms2.31415.def  : file size 153539843
 Load:                3898ms
 Begin:               123ms
 Download(news_local):NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS : 1:news_local(),2:sync_local(),n:news_local with the new Client: 2439(ms)
 Download(Sync):      2064 34 0 0 0 0 0 0 0 0 :(milli-seconds) sync_local() with the same Client. First call updates cache.
 Download(Sync-FULL): 2099 2083 2069 2066 2066 2059 2064 2067 2063 2066 : Avg:2.0702(sec)  : sync_local() with *different* clients.uses cache!
 Download(FULL):      2525 2338 2208 2250 2200 2201 2206 2264 2202 2206 : Avg:2.26(sec)  : get_defs() from different client
 Suspend 262323 tasks : 0.916   news_local() : 0   sync_local() : 3.149
 Resume 262323 tasks  : 0.924   news_local() : 0   sync_local() : 2.183
 Suspend 262323 tasks : 3.184 : auto-sync
 Resume 262323 tasks  : 3.203 : auto-sync
 check  262323 tasks  : 0.394   news_local() : 0.011   sync_local() : 0
 kill   262323 tasks  : 1.337   news_local() : 0.012   sync_local() : 0.014
 force  262323 tasks  : 1.865 force(aborted)   news_local() : 0.014   sync_local() : 5.961
 force  262323 tasks  : 7.913 : auto-sync :  force(queued)
 Check pt:            984 725 738 747 740 741 740 747 745 743 : Avg:0.765(s)
 client cmds:         2000 times 6.379(s) (sync_local) with same client (suspend,resume,force,alter,requeue)
 client cmds:         2000 times 5.623(s) (auto_sync ) with same client (suspend,resume,force,alter,requeue)
 Delete:              893ms

/var/tmp/ma0/BIG_DEFS/3199.def  : file size 59631577
 Load:                1887ms
 Begin:               337ms
 Download(news_local):NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS : 1:news_local(),2:sync_local(),n:news_local with the new Client: 1173(ms)
 Download(Sync):      1053 0 0 0 0 0 0 0 0 0 :(milli-seconds) sync_local() with the same Client. First call updates cache.
 Download(Sync-FULL): 1055 1064 1052 1061 1056 1064 1054 1059 1050 1059 : Avg:1.0574(sec)  : sync_local() with *different* clients.uses cache!
 Download(FULL):      1254 1260 1264 1250 1247 1251 1252 1259 1246 1283 : Avg:1.2566(sec)  : get_defs() from different client
 Suspend 215437 tasks : 0.623   news_local() : 0   sync_local() : 2.463
 Resume 215437 tasks  : 0.682   news_local() : 0   sync_local() : 1.67
 Suspend 215437 tasks : 2.499 : auto-sync
 Resume 215437 tasks  : 2.518 : auto-sync
 check  215437 tasks  : 0.668   news_local() : 0   sync_local() : 0
 kill   215437 tasks  : 0.433   news_local() : 0.01   sync_local() : 0
 force  215437 tasks  : 1.475 force(aborted)   news_local() : 0.009   sync_local() : 4.109
 force  215437 tasks  : 5.571 : auto-sync :  force(queued)
 Check pt:            549 404 338 338 339 337 338 339 338 368 : Avg:0.3688(s)
 client cmds:         2000 times 6.732(s) (sync_local) with same client (suspend,resume,force,alter,requeue)
 client cmds:         2000 times 5.745(s) (auto_sync ) with same client (suspend,resume,force,alter,requeue)
 Delete:              482ms

/var/tmp/ma0/BIG_DEFS/od.def  : file size 11078737
Warning: TASK /lbc/perle/local/perle has a inlimit ../process:excl :The referenced FAMILY '/lbc/perle/process' does not define the limit excl

 Load:                512ms
 Begin:               59ms
 Download(news_local):NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS : 1:news_local(),2:sync_local(),n:news_local with the new Client: 238(ms)
 Download(Sync):      217 0 0 0 0 0 0 0 0 0 :(milli-seconds) sync_local() with the same Client. First call updates cache.
 Download(Sync-FULL): 215 213 218 214 213 213 213 215 214 213 : Avg:0.2141(sec)  : sync_local() with *different* clients.uses cache!
 Download(FULL):      253 252 255 252 254 255 255 253 254 253 : Avg:0.2536(sec)  : get_defs() from different client
 Suspend 43305 tasks : 0.114   news_local() : 0   sync_local() : 0.462
 Resume 43305 tasks  : 0.121   news_local() : 0   sync_local() : 0.313
 Suspend 43305 tasks : 0.458 : auto-sync
 Resume 43305 tasks  : 0.483 : auto-sync
 check  43305 tasks  : 0.201   news_local() : 0   sync_local() : 0
 kill   43305 tasks  : 0.079   news_local() : 0.002   sync_local() : 0
 force  43305 tasks  : 0.25 force(aborted)   news_local() : 0   sync_local() : 0.776
 force  43305 tasks  : 1.047 : auto-sync :  force(queued)
 Check pt:            88 69 53 54 53 53 55 54 53 53 : Avg:0.0585(s)
 client cmds:         2000 times 4.581(s) (sync_local) with same client (suspend,resume,force,alter,requeue)
 client cmds:         2000 times 3.641(s) (auto_sync ) with same client (suspend,resume,force,alter,requeue)
 Delete:              65ms

/var/tmp/ma0/BIG_DEFS/mega.def  : file size 6721759
 Load:                341ms
 Begin:               36ms
 Download(news_local):NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS : 1:news_local(),2:sync_local(),n:news_local with the new Client: 146(ms)
 Download(Sync):      130 0 0 0 0 0 0 0 0 0 :(milli-seconds) sync_local() with the same Client. First call updates cache.
 Download(Sync-FULL): 131 129 129 130 129 129 129 132 129 129 : Avg:0.1296(sec)  : sync_local() with *different* clients.uses cache!
 Download(FULL):      157 155 156 156 156 155 155 155 155 156 : Avg:0.1556(sec)  : get_defs() from different client
 Suspend 27436 tasks : 0.071   news_local() : 0   sync_local() : 0.282
 Resume 27436 tasks  : 0.076   news_local() : 0   sync_local() : 0.195
 Suspend 27436 tasks : 0.28 : auto-sync
 Resume 27436 tasks  : 0.29 : auto-sync
 check  27436 tasks  : 0.107   news_local() : 0   sync_local() : 0
 kill   27436 tasks  : 0.05   news_local() : 0.001   sync_local() : 0
 force  27436 tasks  : 0.166 force(aborted)   news_local() : 0   sync_local() : 0.537
 force  27436 tasks  : 0.708 : auto-sync :  force(queued)
 Check pt:            46 36 35 36 35 34 36 34 36 35 : Avg:0.0363(s)
 client cmds:         2000 times 3.833(s) (sync_local) with same client (suspend,resume,force,alter,requeue)
 client cmds:         2000 times 2.839(s) (auto_sync ) with same client (suspend,resume,force,alter,requeue)
 Delete:              50ms

/var/tmp/ma0/BIG_DEFS/empty.def  : file size 13
 Load:                0ms
 Begin:               0ms
 Download(news_local):NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS NO_NEWS : 1:news_local(),2:sync_local(),n:news_local with the new Client: 1(ms)
 Download(Sync):      0 0 0 0 0 0 0 0 0 0 :(milli-seconds) sync_local() with the same Client. First call updates cache.
 Download(Sync-FULL): 0 0 0 0 0 0 0 0 0 0 : Avg:0(sec)  : sync_local() with *different* clients.uses cache!
 Download(FULL):      0 0 0 0 0 0 0 0 0 0 : Avg:0(sec)  : get_defs() from different client
 Suspend 0 tasks : 0   news_local() : 0   sync_local() : 0
 Resume 0 tasks  : 0   news_local() : 0   sync_local() : 0
 Suspend 0 tasks : 0 : auto-sync
 Resume 0 tasks  : 0 : auto-sync
 check  0 tasks  : 0   news_local() : 0   sync_local() : 0
 kill   0 tasks  : 0   news_local() : 0   sync_local() : 0
 force  0 tasks  : 0 force(aborted)   news_local() : 0   sync_local() : 0
 force  0 tasks  : 0 : auto-sync :  force(queued)
 Check pt:            2 2 0 0 0 0 0 0 0 0 : Avg:0.0004(s)
 client cmds:         0 times 0(s) (sync_local) with same client (suspend,resume,force,alter,requeue)
 client cmds:         0 times 0(s) (auto_sync ) with same client (suspend,resume,force,alter,requeue)
 Delete:              0ms


+ bin/ecflow_client --load /var/tmp/ma0/BIG_DEFS/vsms2.31415.def stats
Definition statistics
Nodes               457888
Suites              37
Family              195527
Task                262323
Alias               1

Edit history nodes  67727
Edit history paths  255692

vars                933908
triggers            63356
complete triggers   2044
events              54876
labels              99237
meters              9703

times               321
todays              3
crons               33
dates               5
days                0

late                15127
inlimits            89267
limits              1232
repeats             219
zombies             29

auto_cancel         0
auto_archive        0
auto_restore        0
verifys             0
queues              0
generics            0
+ bin/ecflow_client --load /var/tmp/ma0/BIG_DEFS/3199.def stats
Definition statistics
Nodes               320829
Suites              18
Family              105374
Task                215437
Alias               0

Edit history nodes  0
Edit history paths  0

vars                885532
triggers            88812
complete triggers   551
events              35477
labels              46714
meters              14994

times               245
todays              0
crons               0
dates               0
days                0

late                41023
inlimits            52376
limits              635
repeats             90
zombies             0

auto_cancel         0
auto_archive        0
auto_restore        0
verifys             0
queues              0
generics            0  
       