<div class="highlight"><pre><span class="c1">#!/usr/bin/env perl</span>
<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$ECF_PORT</span><span class="o">=^</span><span class="n">ECF_PORT:0</span><span class="o">^</span><span class="p">;</span>
<span class="k">my</span> <span class="p">(</span><span class="nv">$svr</span><span class="p">,</span> <span class="nv">$xini</span><span class="p">,</span> <span class="nv">$xabo</span><span class="p">,</span> <span class="nv">$xcom</span><span class="p">,</span> <span class="nv">$xmet</span><span class="p">,</span> <span class="nv">$xeve</span><span class="p">,</span> <span class="nv">$xlab</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$ECF_PORT</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;ECF_PORT&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^ECF_PORT:0^&quot;</span><span class="p">;</span> <span class="c1"># port</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;ECF_HOST&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^ECF_HOST:0^&quot;</span><span class="p">;</span> <span class="c1"># host</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;ECF_NAME&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^ECF_NAME:0^&quot;</span><span class="p">;</span> <span class="c1"># task path</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;ECF_PASS&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^ECF_PASS:0^&quot;</span><span class="p">;</span> <span class="c1"># password</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;ECF_TRYNO&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^ECF_TRYNO:0^&quot;</span><span class="p">;</span> <span class="c1"># job number</span>
  <span class="p">(</span><span class="nv">$svr</span><span class="p">,</span> <span class="nv">$xini</span><span class="p">,</span> <span class="nv">$xabo</span><span class="p">,</span> <span class="nv">$xcom</span><span class="p">,</span> <span class="nv">$xmet</span><span class="p">,</span> <span class="nv">$xeve</span><span class="p">,</span> <span class="nv">$xlab</span><span class="p">)</span> <span class="o">=</span> 
    <span class="p">(</span><span class="s">&quot;ecflow_client&quot;</span><span class="p">,</span> <span class="s">&quot;--init&quot;</span><span class="p">,</span> <span class="s">&quot;--abort&quot;</span><span class="p">,</span> <span class="s">&quot;--complete&quot;</span><span class="p">,</span> 
     <span class="s">&quot;--meter&quot;</span><span class="p">,</span> <span class="s">&quot;--event&quot;</span><span class="p">,</span> <span class="s">&quot;--label&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;SMS_PROG&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^SMS_PROG:0^&quot;</span><span class="p">;</span> <span class="c1"># Program Number</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;SMSNODE&#39;</span><span class="p">}</span>  <span class="o">=</span> <span class="s">&quot;^SMSNODE:0^&quot;</span> <span class="p">;</span> <span class="c1"># SMS host</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;SMSNAME&#39;</span><span class="p">}</span>  <span class="o">=</span> <span class="s">&quot;^SMSNAME:0^&quot;</span> <span class="p">;</span> <span class="c1"># task path</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;SMSPASS&#39;</span><span class="p">}</span>  <span class="o">=</span> <span class="s">&quot;^SMSPASS:0^&quot;</span> <span class="p">;</span> <span class="c1"># password</span>
  <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;SMSTRYNO&#39;</span><span class="p">}</span> <span class="o">=</span> <span class="s">&quot;^SMSTRYNO:0^&quot;</span><span class="p">;</span> <span class="c1"># job number</span>
  <span class="p">(</span><span class="nv">$svr</span><span class="p">,</span> <span class="nv">$xini</span><span class="p">,</span> <span class="nv">$xabo</span><span class="p">,</span> <span class="nv">$xcom</span><span class="p">,</span> <span class="nv">$xmet</span><span class="p">,</span> <span class="nv">$xeve</span><span class="p">,</span> <span class="nv">$xlab</span><span class="p">)</span> <span class="o">=</span> 
    <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;smsinit&quot;</span><span class="p">,</span> <span class="s">&quot;smsabort&quot;</span><span class="p">,</span> <span class="s">&quot;smscomplete&quot;</span><span class="p">,</span> 
     <span class="s">&quot;smsmeter&quot;</span><span class="p">,</span> <span class="s">&quot;smsevent&quot;</span><span class="p">,</span> <span class="s">&quot;smslabel&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xini</span><span class="p">()</span> <span class="p">{</span> <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xini $$&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xabo</span><span class="p">()</span> <span class="p">{</span> <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xabo $$&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xcom</span><span class="p">()</span> <span class="p">{</span> <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xcom $$&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xmet</span><span class="p">()</span> <span class="p">{</span> <span class="k">my</span> <span class="p">(</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$v</span><span class="p">)</span><span class="o">=</span><span class="nv">@_</span><span class="p">;</span>   <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xmet $n $v&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xeve</span><span class="p">($)</span> <span class="p">{</span> <span class="k">my</span> <span class="nv">$n</span><span class="o">=</span><span class="nb">shift</span><span class="p">;</span>    <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xeve $n&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">xlab</span><span class="p">()</span> <span class="p">{</span>  <span class="k">my</span> <span class="p">(</span><span class="nv">$n</span><span class="p">,</span> <span class="nv">$v</span><span class="p">)</span><span class="o">=</span><span class="nv">@_</span><span class="p">;</span> <span class="nb">system</span><span class="p">(</span><span class="s">&quot;$svr $xlab $n $v&quot;</span><span class="p">);</span> <span class="p">}</span>
<span class="n">xini</span><span class="p">();</span>
<span class="nb">eval</span> <span class="err">&#39;</span>
</pre></div>
